<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SortMyMail - AI-powered Email Management</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <div class="logo-large">
                        <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                            <rect width="48" height="48" rx="12" fill="url(#gradient)"/>
                            <path d="M14 18L24 26L34 18M14 18V30C14 31.1046 14.8954 32 16 32H32C33.1046 32 34 31.1046 34 30V18M14 18L16 16H32L34 18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <defs>
                                <linearGradient id="gradient" x1="0" y1="0" x2="48" y2="48">
                                    <stop offset="0%" stop-color="#6366F1"/>
                                    <stop offset="100%" stop-color="#8B5CF6"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <h1 class="login-title">Welcome to SortMyMail</h1>
                    <p class="login-subtitle">AI-powered email management that helps you focus on what matters</p>
                </div>

                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="email" class="form-label">Email address</label>
                        <input 
                            type="email" 
                            id="email" 
                            class="form-input" 
                            placeholder="you@company.com"
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label for="password" class="form-label">Password</label>
                        <input 
                            type="password" 
                            id="password" 
                            class="form-input" 
                            placeholder="Enter your password"
                            required
                        >
                    </div>

                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" class="checkbox-input">
                            <span>Remember me</span>
                        </label>
                        <a href="#" class="link-primary">Forgot password?</a>
                    </div>

                    <button type="submit" class="btn btn-primary btn-large">
                        Sign in to your account
                    </button>

                    <div class="divider">
                        <span>or continue with</span>
                    </div>

                    <div class="social-login">
                        <button type="button" class="btn btn-social">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M19.8 10.2273C19.8 9.51822 19.7364 8.83641 19.6182 8.18188H10.2V12.0501H15.5818C15.3273 13.3001 14.6091 14.3592 13.5409 15.0682V17.5773H16.8182C18.7091 15.8364 19.8 13.2728 19.8 10.2273Z" fill="#4285F4"/>
                                <path d="M10.2 20C12.9 20 15.1727 19.1046 16.8182 17.5773L13.5409 15.0682C12.6409 15.6682 11.5091 16.0228 10.2 16.0228C7.59545 16.0228 5.37273 14.2637 4.57727 11.9H1.19091V14.4909C2.82727 17.7591 6.24545 20 10.2 20Z" fill="#34A853"/>
                                <path d="M4.57727 11.9C4.35909 11.3 4.23636 10.6591 4.23636 10C4.23636 9.34091 4.35909 8.7 4.57727 8.1V5.50909H1.19091C0.531818 6.82727 0.163636 8.37273 0.163636 10C0.163636 11.6273 0.531818 13.1727 1.19091 14.4909L4.57727 11.9Z" fill="#FBBC04"/>
                                <path d="M10.2 3.97727C11.6227 3.97727 12.8864 4.48182 13.8773 5.43636L16.7909 2.52273C15.1682 0.895455 12.8955 0 10.2 0C6.24545 0 2.82727 2.24091 1.19091 5.50909L4.57727 8.1C5.37273 5.73636 7.59545 3.97727 10.2 3.97727Z" fill="#EA4335"/>
                            </svg>
                            Google
                        </button>
                        <button type="button" class="btn btn-social">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 0C4.477 0 0 4.477 0 10c0 4.42 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0110 4.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.137 18.163 20 14.418 20 10c0-5.523-4.477-10-10-10z"/>
                            </svg>
                            GitHub
                        </button>
                    </div>
                </form>

                <div class="login-footer">
                    Don't have an account? <a href="#" class="link-primary">Sign up</a>
                </div>
            </div>

            <div class="login-features">
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <div>
                        <h3>AI-Powered Sorting</h3>
                        <p>Automatically prioritizes your emails using advanced AI</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <div>
                        <h3>Smart Replies</h3>
                        <p>Respond faster with AI-suggested replies</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                        </svg>
                    </div>
                    <div>
                        <h3>Custom Filters</h3>
                        <p>Create rules that adapt to your workflow</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="app-container hidden">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 48 48" fill="none">
                        <rect width="48" height="48" rx="10" fill="url(#sidebarGradient)"/>
                        <path d="M14 18L24 26L34 18M14 18V30C14 31.1046 14.8954 32 16 32H32C33.1046 32 34 31.1046 34 30V18M14 18L16 16H32L34 18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <defs>
                            <linearGradient id="sidebarGradient" x1="0" y1="0" x2="48" y2="48">
                                <stop offset="0%" stop-color="#6366F1"/>
                                <stop offset="100%" stop-color="#8B5CF6"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <span>SortMyMail</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-item active" data-view="inbox">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                    </svg>
                    <span>Inbox</span>
                    <span class="nav-badge">25</span>
                </button>

                <button class="nav-item" data-view="sent">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                    </svg>
                    <span>Sent</span>
                </button>

                <button class="nav-item" data-view="drafts">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                    </svg>
                    <span>Drafts</span>
                    <span class="nav-badge">3</span>
                </button>

                <div class="nav-divider"></div>

                <div class="nav-section-title">Custom Folders</div>

                <button class="nav-item" data-view="clients">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
                    </svg>
                    <span>Clients</span>
                    <span class="folder-color" style="background: #10b981;"></span>
                </button>

                <button class="nav-item" data-view="invoices">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
                    </svg>
                    <span>Invoices</span>
                    <span class="folder-color" style="background: #f59e0b;"></span>
                </button>

                <button class="nav-item nav-item-add" id="addFolderBtn">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    <span>Add folder</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <button class="user-menu">
                    <div class="user-avatar">
                        <img src="data:image/svg+xml,%3Csvg width='40' height='40' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='40' height='40' fill='%236366F1'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-family='sans-serif' font-size='16' font-weight='600'%3EJD%3C/text%3E%3C/svg%3E" alt="User">
                    </div>
                    <div class="user-info">
                        <div class="user-name">John Don</div>
                        <div class="user-email">J.Don@sortmymail.com</div>
                    </div>
                    <svg class="chevron-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Topbar -->
            <header class="topbar">
                <div class="search-wrapper">
                    <svg class="search-icon" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <input 
                        type="text" 
                        class="search-input" 
                        placeholder="Search emails... (e.g., invoices last month)"
                        id="searchInput"
                    >
                    <kbd class="search-shortcut">âŒ˜K</kbd>
                </div>

                <div class="topbar-actions">
                    <button class="icon-btn" title="Notifications">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                        </svg>
                        <span class="notification-dot"></span>
                    </button>

                    <button class="icon-btn" title="Settings">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                    </button>

                    <button class="btn btn-primary btn-compose" id="composeBtn">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                        </svg>
                        Compose
                    </button>
                </div>
            </header>

            <!-- Filter Pills -->
            <div class="filter-bar">
                <div class="filter-pills" id="filterPills">
                    <button class="pill active" data-filter="all">All</button>
                    <button class="pill" data-filter="unread">Unread</button>
                    <button class="pill" data-filter="attachments">With attachments</button>
                    <button class="pill" data-filter="vip">VIP</button>
                    <button class="pill" data-filter="this-week">This week</button>
                </div>

                <div class="view-toggle">
                    <button class="view-btn active" data-view="buckets" title="Bucket view">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"/>
                        </svg>
                    </button>
                    <button class="view-btn" data-view="list" title="List view">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Buckets View -->
            <div class="content-area" id="bucketsView">
                <div class="buckets-grid">
                    <!-- Urgent Bucket -->
                    <div class="bucket bucket-urgent" data-bucket="urgent">
                        <div class="bucket-header">
                            <div class="bucket-title-group">
                                <h2 class="bucket-title">Urgent</h2>
                                <span class="bucket-count">5</span>
                            </div>
                            <button class="why-btn" data-tooltip="urgent">
                                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="bucket-cards" id="urgentCards"></div>
                    </div>

                    <!-- Today Bucket -->
                    <div class="bucket bucket-today" data-bucket="today">
                        <div class="bucket-header">
                            <div class="bucket-title-group">
                                <h2 class="bucket-title">Today</h2>
                                <span class="bucket-count">8</span>
                            </div>
                            <button class="why-btn" data-tooltip="today">
                                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="bucket-cards" id="todayCards"></div>
                    </div>

                    <!-- Later Bucket -->
                    <div class="bucket bucket-later" data-bucket="later">
                        <div class="bucket-header">
                            <div class="bucket-title-group">
                                <h2 class="bucket-title">Later</h2>
                                <span class="bucket-count">12</span>
                            </div>
                            <button class="why-btn" data-tooltip="later">
                                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="bucket-cards" id="laterCards"></div>
                    </div>

                    <!-- News Bucket -->
                    <div class="bucket bucket-news" data-bucket="news">
                        <div class="bucket-header">
                            <div class="bucket-title-group">
                                <h2 class="bucket-title">News</h2>
                                <span class="bucket-count">15</span>
                            </div>
                            <button class="why-btn" data-tooltip="news">
                                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="bucket-cards" id="newsCards"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Thread Detail Modal -->
    <div id="threadModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-header-left">
                    <button class="icon-btn" id="backToInbox">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                        </svg>
                    </button>
                    <h2 class="modal-title">Email Thread</h2>
                </div>
                <div class="modal-actions">
                    <button class="icon-btn" title="Archive">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
                        </svg>
                    </button>
                    <button class="icon-btn" title="Delete">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                    </button>
                    <button class="icon-btn" id="closeThreadModal">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="modal-content">
                <div class="ai-summary-card">
                    <div class="ai-summary-header">
                        <div class="ai-badge">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                            </svg>
                            AI Summary
                        </div>
                        <button class="why-btn-inline">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Why urgent?
                        </button>
                    </div>
                    <p class="ai-summary-text" id="summaryText"></p>
                    <div class="ai-summary-meta">
                        <span class="meta-item">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <strong>Action:</strong> <span id="actionText"></span>
                        </span>
                        <span class="meta-item">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            <strong>Deadline:</strong> <span id="deadlineText"></span>
                        </span>
                    </div>
                </div>

                <div class="thread-messages" id="threadMessages"></div>

                <div class="smart-replies-section">
                    <h3 class="smart-replies-title">Quick replies</h3>
                    <div class="smart-replies">
                        <button class="smart-reply-chip" data-action="approve">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                            Approve
                        </button>
                        <button class="smart-reply-chip" data-action="details">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Ask for details
                        </button>
                        <button class="smart-reply-chip" data-action="acknowledge">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"/>
                            </svg>
                            Acknowledge
                        </button>
                    </div>
                    <button class="btn btn-secondary btn-full-reply">
                        Write custom reply
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tooltip -->
    <div id="tooltip" class="tooltip"></div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <div class="toast-content">
            <svg class="toast-icon" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            <span class="toast-text" id="toastText"></span>
        </div>
        <button class="toast-action" id="toastAction">Undo</button>
    </div>

    <!-- Create Folder Modal -->
    <div id="createFolderModal" class="modal-overlay">
        <div class="modal-container modal-large">
            <div class="modal-header">
                <div class="modal-header-left">
                    <h2 class="modal-title">Create Custom Folder</h2>
                </div>
                <button class="icon-btn" id="closeFolderModal">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <div class="modal-content">
                <!-- Step Indicator -->
                <div class="step-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">Basics</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">Rules</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">Preview</div>
                    </div>
                </div>

                <!-- Step 1: Basics -->
                <div class="folder-step" id="folderStep1">
                    <h3 class="step-title">Folder Details</h3>
                    
                    <div class="form-group">
                        <label class="form-label" for="folderName">Folder Name*</label>
                        <input type="text" id="folderName" class="form-input" placeholder="e.g., Clients, Invoices, Projects">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Folder Color</label>
                        <div class="color-picker">
                            <button class="color-option active" data-color="#10b981" style="background: #10b981;"></button>
                            <button class="color-option" data-color="#3b82f6" style="background: #3b82f6;"></button>
                            <button class="color-option" data-color="#f59e0b" style="background: #f59e0b;"></button>
                            <button class="color-option" data-color="#ef4444" style="background: #ef4444;"></button>
                            <button class="color-option" data-color="#8b5cf6" style="background: #8b5cf6;"></button>
                            <button class="color-option" data-color="#ec4899" style="background: #ec4899;"></button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Folder Icon</label>
                        <div class="icon-picker">
                            <button class="icon-option active" data-icon="folder">
                                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
                                </svg>
                            </button>
                            <button class="icon-option" data-icon="briefcase">
                                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                            </button>
                            <button class="icon-option" data-icon="receipt">
                                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </button>
                            <button class="icon-option" data-icon="users">
                                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
                                </svg>
                            </button>
                            <button class="icon-option" data-icon="star">
                                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="folderVisible" class="checkbox-input" checked>
                            <span>Show folder in sidebar</span>
                        </label>
                    </div>
                </div>

                <!-- Step 2: Rules -->
                <div class="folder-step hidden" id="folderStep2">
                    <h3 class="step-title">Filter Rules</h3>
                    <p class="step-subtitle">Define rules to automatically sort emails into this folder</p>

                    <div class="rules-container" id="rulesContainer">
                        <div class="rule-group">
                            <div class="rule-header">
                                <label class="form-label">Match</label>
                                <select class="form-select" id="ruleLogic">
                                    <option value="all">ALL of the following rules</option>
                                    <option value="any">ANY of the following rules</option>
                                </select>
                            </div>

                            <div class="rule-item">
                                <select class="form-select rule-type">
                                    <option value="sender">Sender/Domain</option>
                                    <option value="vip">VIP Status</option>
                                    <option value="deadline">Deadline</option>
                                    <option value="action">Action Type</option>
                                    <option value="keywords">Keywords</option>
                                    <option value="attachments">Has Attachments</option>
                                    <option value="internal">Internal/External</option>
                                    <option value="language">Language</option>
                                    <option value="timeframe">Time Frame</option>
                                    <option value="newsletter">Newsletter/System</option>
                                    <option value="label">Label</option>
                                </select>
                                <select class="form-select rule-operator">
                                    <option value="is">is</option>
                                    <option value="contains">contains</option>
                                    <option value="starts">starts with</option>
                                    <option value="ends">ends with</option>
                                </select>
                                <input type="text" class="form-input rule-value" placeholder="Value">
                                <button class="icon-btn btn-remove-rule">
                                    <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <button class="btn btn-secondary" id="addRuleBtn">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                            </svg>
                            Add Another Rule
                        </button>
                    </div>
                </div>

                <!-- Step 3: Preview -->
                <div class="folder-step hidden" id="folderStep3">
                    <h3 class="step-title">Preview & Confirm</h3>
                    <p class="step-subtitle">Review matching emails before creating the folder</p>

                    <div class="preview-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="previewCount">0</div>
                            <div class="stat-label">Matching Emails</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="previewRules">0</div>
                            <div class="stat-label">Active Rules</div>
                        </div>
                    </div>

                    <div class="preview-list" id="previewList">
                        <!-- Email preview cards will be inserted here -->
                    </div>
                </div>

                <!-- Modal Actions -->
                <div class="modal-actions-footer">
                    <button class="btn btn-secondary" id="folderBackBtn">Back</button>
                    <button class="btn btn-primary" id="folderNextBtn">Next</button>
                    <button class="btn btn-primary hidden" id="folderCreateBtn">Create Folder</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Compose/Reply Modal -->
    <div id="composeModal" class="modal-overlay">
        <div class="modal-container modal-large">
            <div class="modal-header">
                <div class="modal-header-left">
                    <h2 class="modal-title" id="composeTitle">New Message</h2>
                </div>
                <div class="modal-actions">
                    <button class="icon-btn" title="Minimize">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                        </svg>
                    </button>
                    <button class="icon-btn" id="closeComposeModal">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="modal-content compose-content">
                <div class="compose-main">
                    <div class="compose-fields">
                        <div class="compose-field">
                            <label class="field-label">To</label>
                            <input type="text" class="field-input" id="composeTo" placeholder="Recipients">
                        </div>
                        <div class="compose-field">
                            <label class="field-label">Subject</label>
                            <input type="text" class="field-input" id="composeSubject" placeholder="Email subject">
                        </div>
                        <div class="compose-field-full">
                            <textarea class="compose-textarea" id="composeBody" placeholder="Write your message..."></textarea>
                        </div>
                    </div>

                    <div class="compose-toolbar">
                        <button class="toolbar-btn" title="Attach file">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
                            </svg>
                        </button>
                        <button class="toolbar-btn" title="Insert emoji">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </button>
                        <button class="toolbar-btn" title="Format text">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/>
                            </svg>
                        </button>
                        <div class="toolbar-divider"></div>
                        <button class="toolbar-btn" title="Schedule send">
                            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="compose-ai-panel">
                    <div class="ai-panel-header">
                        <div class="ai-badge">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                            </svg>
                            AI Assistant
                        </div>
                    </div>

                    <div class="ai-suggestions">
                        <h4 class="ai-subtitle">Quick Actions</h4>
                        <button class="ai-action-btn" data-action="improve">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                            </svg>
                            Improve Writing
                        </button>
                        <button class="ai-action-btn" data-action="shorten">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                            Make Shorter
                        </button>
                        <button class="ai-action-btn" data-action="expand">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/>
                            </svg>
                            Expand Details
                        </button>
                        <button class="ai-action-btn" data-action="professional">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                            </svg>
                            More Professional
                        </button>
                        <button class="ai-action-btn" data-action="friendly">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            More Friendly
                        </button>
                        <button class="ai-action-btn" data-action="grammar">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Fix Grammar
                        </button>
                    </div>

                    <div class="ai-tone-selector">
                        <h4 class="ai-subtitle">Tone</h4>
                        <select class="form-select" id="aiTone">
                            <option value="professional">Professional</option>
                            <option value="friendly">Friendly</option>
                            <option value="formal">Formal</option>
                            <option value="casual">Casual</option>
                        </select>
                    </div>

                    <div class="ai-length-selector">
                        <h4 class="ai-subtitle">Length</h4>
                        <div class="length-options">
                            <button class="length-btn active" data-length="short">Short</button>
                            <button class="length-btn" data-length="medium">Medium</button>
                            <button class="length-btn" data-length="long">Long</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="compose-footer">
                <button class="btn btn-primary" id="sendEmailBtn">
                    <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                    </svg>
                    Send
                </button>
                <button class="btn btn-secondary">Save Draft</button>
                <button class="btn btn-secondary">
                    <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                    Discard
                </button>
            </div>
        </div>
    </div>

    <!-- Calendar Modal -->
    <div id="calendarModal" class="modal-overlay">
        <div class="modal-container modal-xlarge">
            <div class="modal-header">
                <div class="modal-header-left">
                    <h2 class="modal-title">Smart Calendar</h2>
                    <p class="modal-subtitle">AI-detected deadlines and meetings from your emails</p>
                </div>
                <button class="icon-btn" id="closeCalendarModal">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <div class="modal-content">
                <div class="calendar-controls">
                    <div class="calendar-nav">
                        <button class="btn btn-secondary" id="calPrevMonth">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                        </button>
                        <h3 class="calendar-month" id="calendarMonth">November 2025</h3>
                        <button class="btn btn-secondary" id="calNextMonth">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                    <button class="btn btn-primary" id="calToday">Today</button>
                </div>

                <div class="calendar-grid">
                    <div class="calendar-header">
                        <div class="calendar-day-label">Sun</div>
                        <div class="calendar-day-label">Mon</div>
                        <div class="calendar-day-label">Tue</div>
                        <div class="calendar-day-label">Wed</div>
                        <div class="calendar-day-label">Thu</div>
                        <div class="calendar-day-label">Fri</div>
                        <div class="calendar-day-label">Sat</div>
                    </div>
                    <div class="calendar-days" id="calendarDays">
                        <!-- Calendar days will be generated by JS -->
                    </div>
                </div>

                <div class="calendar-events-panel">
                    <h3 class="events-title">Detected Events</h3>
                    <div class="events-list" id="detectedEvents">
                        <!-- Events will be populated by JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Menu Dropdown -->
    <div id="userMenuDropdown" class="dropdown-menu hidden">
        <button class="dropdown-item">
            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            Profile Settings
        </button>
        <button class="dropdown-item">
            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
            </svg>
            Preferences
        </button>
        <button class="dropdown-item" id="toggleDarkMode">
            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
            </svg>
            <span id="darkModeText">Dark Mode</span>
        </button>
        <div class="dropdown-divider"></div>
        <button class="dropdown-item" id="logoutBtn">
            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
            </svg>
            Logout
        </button>
    </div>

    <script src="app.js"></script>
</body>
</html>